<!--
create a new review in the show of reviews (content/rating)
boardgame show edit button
boardgame show delete button
show a map where the game is located
-->
<div class="container">

  <div class="card-trip p-2">
    <%= cl_image_tag @boardgame.photo, crop: :fill, alt: @boardgame.name %>
    <div class="card-trip-infos">
<!--       <div>
 -->        <h2><%= @boardgame.name %></h2>
        <p><%= @boardgame.year %></p>
        <p><%= @boardgame.description %></p>
<!--       </div>
 -->      <h2 class="card-trip-pricing"><%= @boardgame.price_per_day %></h2>
      <%#= render 'availability_toggle' %>
      <img src='https://kitt.lewagon.com/placeholder/users/krokrob' class="card-trip-user avatar-bordered"/>
    </div>
  </div>


  <div class="card p-2">
    <% @reviews = @boardgame.reviews.last(5).reverse %>
    <% @reviews.each do | review| %>
    <div class="notification">
      <img src='https://kitt.lewagon.com/placeholder/users/arthur-littm' class="avatar-large"/>
      <%#= cl_image_tag @user.photo, alt: @user.last_name, @user.first_name %>
      <div class="notification-content">
        <% review.rating.times do |s| %>
        <i class="fas fa-star"></i>
        <% end %>
        <p><%= truncate(review.content, length: 100) %></p>
      </div>
      <div class="notification-actions">
        <%#= link_to "delete", review_path(@review), method: :delete %>
        <a href="#">Delete <i class="far fa-trash-alt"></i></a>
      </div>
    </div>
    <% end %>
    <% if current_user.has_booking_to_review? %>
    <div class="notification">
      <img src='https://kitt.lewagon.com/placeholder/users/Eschults' class="avatar-large"/>
      <div class="notification-content">
        <p><%= render 'review_form' %></p>
      </div>
      <div class="notification-actions">
        <%# if policy(@review).destroy? %>
          <%#= link_to edit_boardgame_path(@boardgame) do %>
<!--             <p>Delete <i class="far fa-trash-alt"></i></p> -->
          <%# end %>
        <%# end %>
      </div>
    </div>
    <% end %>

  <div>
    <% if policy(@boardgame).update? %>
      <%= link_to 'Update Boardgame', edit_boardgame_path(@boardgame), class:"btn btn-outline-primary btn-sm rounded m-2" %>
    <% end %>
    <% if policy(@boardgame).destroy? %>
      <%= link_to 'Delete Boardgame', boardgame_path(@boardgame), class:"btn btn-outline-primary btn-sm rounded m-2", data: { confirm: 'Are you sure?' }, method: :delete %>
    <% end %>
  </div>
</div>



